<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Edit Profile</title>
    <link rel="stylesheet" href="ResetPassword.css">
  </head>
  <body>
    <div class=container>
    <h2>Edit Profile</h2>
    <form action="http://3.83.252.232:3001/driver/edit" method="post">
      <label for="first">First Name</label>
      <input id="first" type="text" name="first" value="first">
      <label for="mi_name">Middle Initial</label>
      <input id="middle" type="text" name="middle" value="mi">
      <label for="last_name">Last Name</label>
      <input type="text" id="last" name="last" value="last"><br>
      <label for="username">Username</label>
      <input id="username" type="text" READONLY name="username" value="username"><br>
      <label for="email">Email Address</label>
      <input id="email" type="text" name="email" value="email"><br>
      <label for="phone">Phone Number</label>
      <input id="phone" type="text" name="phone" value="phone"><br>
      <label for="shipping">Shipping Address</label>
      <input id="address" type="text" name="address" value="shipping"><br>
      <button id="submit" type="submit" name="save">Save</button>
      <button id="submit" type="button" name="cancel" onclick="goBack()">Cancel</button>

    </form>
  </div>

  <script type="text/javascript">
    function goBack() {
      window.history.back();
    }
  </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript"charset="utf-8">
    const queryParamsString = window.location.search.substr(1);
    console.log(queryParamsString);
    const queryParams = queryParamsString.split('&').reduce((accumulator, singleQueryParam) => {
    const [key, value] = singleQueryParam.split('=');
    accumulator[key] = value;
    return accumulator;
  }, {})
    console.log(queryParams.username);
      let getURL = "http://3.83.252.232:3001/user/" + queryParams.username;
      $.ajax({
        type: "GET",
        url: getURL,
        success: function (data) {
          data = data[0];
          document.getElementById("first").value = "" + data["first"];
          document.getElementById("middle").value = data["middle"];
          document.getElementById("last").value = data["last"];
          document.getElementById("username").value = data["username"];
          document.getElementById("email").value = data["email"];
          document.getElementById("phone").value = data["phone"];
          document.getElementById("address").value = data["address"];
        }
      });

      function getCookie(cname) {
        var name = cname + "=";
        var decodedCookie = decodeURIComponent(document.cookie);
        var ca = decodedCookie.split(';');
        for(var i = 0; i <ca.length; i++) {
          var c = ca[i];
          while (c.charAt(0) == ' ') {
            c = c.substring(1);
          }
          if (c.indexOf(name) == 0) {
            return c.substring(name.length, c.length);
          }
        }
        return "";
        }

    </script>
  </body>


</html>
