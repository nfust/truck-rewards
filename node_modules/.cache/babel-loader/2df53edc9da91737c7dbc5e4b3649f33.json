{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport React, { Children, cloneElement, Component, isValidElement } from 'react';\nimport PropTypes from 'prop-types';\nimport compose from 'recompose/compose';\nimport { CSSTransition, TransitionGroup } from 'react-transition-group';\nimport get from 'lodash/get';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport { withStyles, createStyles } from '@material-ui/core/styles';\nimport CloseIcon from '@material-ui/icons/RemoveCircleOutline';\nimport AddIcon from '@material-ui/icons/AddCircleOutline';\nimport { translate, ValidationError } from 'ra-core';\nimport classNames from 'classnames';\nimport FormInput from '../form/FormInput';\n\nvar styles = function (theme) {\n  var _a, _b;\n\n  return createStyles({\n    root: {\n      padding: 0,\n      marginBottom: 0,\n      '& > li:last-child': {\n        borderBottom: 'none'\n      }\n    },\n    line: (_a = {\n      display: 'flex',\n      listStyleType: 'none',\n      borderBottom: \"solid 1px \" + theme.palette.divider\n    }, _a[theme.breakpoints.down('xs')] = {\n      display: 'block'\n    }, _a['&.fade-enter'] = {\n      opacity: 0.01,\n      transform: 'translateX(100vw)'\n    }, _a['&.fade-enter-active'] = {\n      opacity: 1,\n      transform: 'translateX(0)',\n      transition: 'all 500ms ease-in'\n    }, _a['&.fade-exit'] = {\n      opacity: 1,\n      transform: 'translateX(0)'\n    }, _a['&.fade-exit-active'] = {\n      opacity: 0.01,\n      transform: 'translateX(100vw)',\n      transition: 'all 500ms ease-in'\n    }, _a),\n    index: (_b = {\n      width: '3em',\n      paddingTop: '1em'\n    }, _b[theme.breakpoints.down('sm')] = {\n      display: 'none'\n    }, _b),\n    form: {\n      flex: 2\n    },\n    action: {\n      paddingTop: '0.5em'\n    },\n    leftIcon: {\n      marginRight: theme.spacing(1)\n    }\n  });\n};\n\nvar SimpleFormIterator =\n/** @class */\nfunction (_super) {\n  __extends(SimpleFormIterator, _super);\n\n  function SimpleFormIterator(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.removeField = function (index) {\n      return function () {\n        var fields = _this.props.fields;\n\n        _this.ids.splice(index, 1);\n\n        fields.remove(index);\n      };\n    }; // Returns a boolean to indicate whether to disable the remove button for certain fields.\n    // If disableRemove is a function, then call the function with the current record to\n    // determining if the button should be disabled. Otherwise, use a boolean property that\n    // enables or disables the button for all of the fields.\n\n\n    _this.disableRemoveField = function (record, disableRemove) {\n      if (typeof disableRemove === 'boolean') {\n        return disableRemove;\n      }\n\n      return disableRemove && disableRemove(record);\n    };\n\n    _this.addField = function () {\n      var fields = _this.props.fields;\n\n      _this.ids.push(_this.nextId++);\n\n      fields.push({});\n    }; // we need a unique id for each field for a proper enter/exit animation\n    // but redux-form doesn't provide one (cf https://github.com/erikras/redux-form/issues/2735)\n    // so we keep an internal map between the field position and an auto-increment id\n\n\n    _this.nextId = props.fields.length ? props.fields.length : props.defaultValue ? props.defaultValue.length : 0; // We check whether we have a defaultValue (which must be an array) before checking\n    // the fields prop which will always be empty for a new record.\n    // Without it, our ids wouldn't match the default value and we would get key warnings\n    // on the CssTransition element inside our render method\n\n    _this.ids = _this.nextId > 0 ? Array.from(Array(_this.nextId).keys()) : [];\n    return _this;\n  }\n\n  SimpleFormIterator.prototype.render = function () {\n    var _this = this;\n\n    var _a = this.props,\n        basePath = _a.basePath,\n        _b = _a.classes,\n        classes = _b === void 0 ? {} : _b,\n        children = _a.children,\n        fields = _a.fields,\n        _c = _a.meta,\n        error = _c.error,\n        submitFailed = _c.submitFailed,\n        record = _a.record,\n        resource = _a.resource,\n        source = _a.source,\n        translate = _a.translate,\n        disableAdd = _a.disableAdd,\n        disableRemove = _a.disableRemove,\n        variant = _a.variant,\n        margin = _a.margin,\n        TransitionProps = _a.TransitionProps;\n    var records = get(record, source);\n    return fields ? React.createElement(\"ul\", {\n      className: classes.root\n    }, submitFailed && typeof error !== 'object' && error && React.createElement(FormHelperText, {\n      error: true\n    }, React.createElement(ValidationError, {\n      error: error\n    })), React.createElement(TransitionGroup, {\n      component: null\n    }, fields.map(function (member, index) {\n      return React.createElement(CSSTransition, __assign({\n        key: _this.ids[index],\n        timeout: 500,\n        classNames: \"fade\"\n      }, TransitionProps), React.createElement(\"li\", {\n        className: classes.line\n      }, React.createElement(Typography, {\n        variant: \"body1\",\n        className: classes.index\n      }, index + 1), React.createElement(\"section\", {\n        className: classes.form\n      }, Children.map(children, function (input, index2) {\n        return isValidElement(input) ? React.createElement(FormInput, {\n          basePath: input.props.basePath || basePath,\n          input: cloneElement(input, {\n            source: input.props.source ? member + \".\" + input.props.source : member,\n            index: input.props.source ? undefined : index2,\n            label: typeof input.props.label === 'undefined' ? input.props.source ? \"resources.\" + resource + \".fields.\" + input.props.source : undefined : input.props.label\n          }),\n          record: records && records[index] || {},\n          resource: resource,\n          variant: variant,\n          margin: margin\n        }) : null;\n      })), !_this.disableRemoveField(records && records[index] || {}, disableRemove) && React.createElement(\"span\", {\n        className: classes.action\n      }, React.createElement(Button, {\n        className: classNames('button-remove', \"button-remove-\" + source + \"-\" + index),\n        size: \"small\",\n        onClick: _this.removeField(index)\n      }, React.createElement(CloseIcon, {\n        className: classes.leftIcon\n      }), translate('ra.action.remove')))));\n    })), !disableAdd && React.createElement(\"li\", {\n      className: classes.line\n    }, React.createElement(\"span\", {\n      className: classes.action\n    }, React.createElement(Button, {\n      className: classNames('button-add', \"button-add-\" + source),\n      size: \"small\",\n      onClick: this.addField\n    }, React.createElement(AddIcon, {\n      className: classes.leftIcon\n    }), translate('ra.action.add'))))) : null;\n  };\n\n  return SimpleFormIterator;\n}(Component);\n\nexport { SimpleFormIterator };\nSimpleFormIterator.defaultProps = {\n  disableAdd: false,\n  disableRemove: false\n};\nSimpleFormIterator.propTypes = {\n  defaultValue: PropTypes.any,\n  basePath: PropTypes.string,\n  children: PropTypes.node,\n  classes: PropTypes.object,\n  className: PropTypes.string,\n  fields: PropTypes.object,\n  meta: PropTypes.object,\n  record: PropTypes.object,\n  source: PropTypes.string,\n  resource: PropTypes.string,\n  translate: PropTypes.func,\n  disableAdd: PropTypes.bool,\n  disableRemove: PropTypes.oneOfType([PropTypes.func, PropTypes.bool]),\n  TransitionProps: PropTypes.shape({})\n};\nexport default compose(translate, withStyles(styles))(SimpleFormIterator);","map":{"version":3,"sources":["/home/ubuntu/truck-rewards/node_modules/ra-ui-materialui/esm/form/SimpleFormIterator.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","React","Children","cloneElement","Component","isValidElement","PropTypes","compose","CSSTransition","TransitionGroup","get","Typography","Button","FormHelperText","withStyles","createStyles","CloseIcon","AddIcon","translate","ValidationError","classNames","FormInput","styles","theme","_a","_b","root","padding","marginBottom","borderBottom","line","display","listStyleType","palette","divider","breakpoints","down","opacity","transform","transition","index","width","paddingTop","form","flex","action","leftIcon","marginRight","spacing","SimpleFormIterator","_super","props","_this","removeField","fields","ids","splice","remove","disableRemoveField","record","disableRemove","addField","push","nextId","defaultValue","from","keys","render","basePath","classes","children","_c","meta","error","submitFailed","resource","source","disableAdd","variant","margin","TransitionProps","records","createElement","className","component","map","member","key","timeout","input","index2","undefined","label","size","onClick","defaultProps","propTypes","any","string","node","object","func","bool","oneOfType","shape"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport React, { Children, cloneElement, Component, isValidElement, } from 'react';\nimport PropTypes from 'prop-types';\nimport compose from 'recompose/compose';\nimport { CSSTransition, TransitionGroup } from 'react-transition-group';\nimport get from 'lodash/get';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport { withStyles, createStyles } from '@material-ui/core/styles';\nimport CloseIcon from '@material-ui/icons/RemoveCircleOutline';\nimport AddIcon from '@material-ui/icons/AddCircleOutline';\nimport { translate, ValidationError } from 'ra-core';\nimport classNames from 'classnames';\nimport FormInput from '../form/FormInput';\nvar styles = function (theme) {\n    var _a, _b;\n    return createStyles({\n        root: {\n            padding: 0,\n            marginBottom: 0,\n            '& > li:last-child': {\n                borderBottom: 'none',\n            },\n        },\n        line: (_a = {\n                display: 'flex',\n                listStyleType: 'none',\n                borderBottom: \"solid 1px \" + theme.palette.divider\n            },\n            _a[theme.breakpoints.down('xs')] = { display: 'block' },\n            _a['&.fade-enter'] = {\n                opacity: 0.01,\n                transform: 'translateX(100vw)',\n            },\n            _a['&.fade-enter-active'] = {\n                opacity: 1,\n                transform: 'translateX(0)',\n                transition: 'all 500ms ease-in',\n            },\n            _a['&.fade-exit'] = {\n                opacity: 1,\n                transform: 'translateX(0)',\n            },\n            _a['&.fade-exit-active'] = {\n                opacity: 0.01,\n                transform: 'translateX(100vw)',\n                transition: 'all 500ms ease-in',\n            },\n            _a),\n        index: (_b = {\n                width: '3em',\n                paddingTop: '1em'\n            },\n            _b[theme.breakpoints.down('sm')] = { display: 'none' },\n            _b),\n        form: { flex: 2 },\n        action: {\n            paddingTop: '0.5em',\n        },\n        leftIcon: {\n            marginRight: theme.spacing(1),\n        },\n    });\n};\nvar SimpleFormIterator = /** @class */ (function (_super) {\n    __extends(SimpleFormIterator, _super);\n    function SimpleFormIterator(props) {\n        var _this = _super.call(this, props) || this;\n        _this.removeField = function (index) { return function () {\n            var fields = _this.props.fields;\n            _this.ids.splice(index, 1);\n            fields.remove(index);\n        }; };\n        // Returns a boolean to indicate whether to disable the remove button for certain fields.\n        // If disableRemove is a function, then call the function with the current record to\n        // determining if the button should be disabled. Otherwise, use a boolean property that\n        // enables or disables the button for all of the fields.\n        _this.disableRemoveField = function (record, disableRemove) {\n            if (typeof disableRemove === 'boolean') {\n                return disableRemove;\n            }\n            return disableRemove && disableRemove(record);\n        };\n        _this.addField = function () {\n            var fields = _this.props.fields;\n            _this.ids.push(_this.nextId++);\n            fields.push({});\n        };\n        // we need a unique id for each field for a proper enter/exit animation\n        // but redux-form doesn't provide one (cf https://github.com/erikras/redux-form/issues/2735)\n        // so we keep an internal map between the field position and an auto-increment id\n        _this.nextId = props.fields.length\n            ? props.fields.length\n            : props.defaultValue\n                ? props.defaultValue.length\n                : 0;\n        // We check whether we have a defaultValue (which must be an array) before checking\n        // the fields prop which will always be empty for a new record.\n        // Without it, our ids wouldn't match the default value and we would get key warnings\n        // on the CssTransition element inside our render method\n        _this.ids = _this.nextId > 0 ? Array.from(Array(_this.nextId).keys()) : [];\n        return _this;\n    }\n    SimpleFormIterator.prototype.render = function () {\n        var _this = this;\n        var _a = this.props, basePath = _a.basePath, _b = _a.classes, classes = _b === void 0 ? {} : _b, children = _a.children, fields = _a.fields, _c = _a.meta, error = _c.error, submitFailed = _c.submitFailed, record = _a.record, resource = _a.resource, source = _a.source, translate = _a.translate, disableAdd = _a.disableAdd, disableRemove = _a.disableRemove, variant = _a.variant, margin = _a.margin, TransitionProps = _a.TransitionProps;\n        var records = get(record, source);\n        return fields ? (React.createElement(\"ul\", { className: classes.root },\n            submitFailed && typeof error !== 'object' && error && (React.createElement(FormHelperText, { error: true },\n                React.createElement(ValidationError, { error: error }))),\n            React.createElement(TransitionGroup, { component: null }, fields.map(function (member, index) { return (React.createElement(CSSTransition, __assign({ key: _this.ids[index], timeout: 500, classNames: \"fade\" }, TransitionProps),\n                React.createElement(\"li\", { className: classes.line },\n                    React.createElement(Typography, { variant: \"body1\", className: classes.index }, index + 1),\n                    React.createElement(\"section\", { className: classes.form }, Children.map(children, function (input, index2) {\n                        return isValidElement(input) ? (React.createElement(FormInput, { basePath: input.props.basePath ||\n                                basePath, input: cloneElement(input, {\n                                source: input.props.source\n                                    ? member + \".\" + input.props.source\n                                    : member,\n                                index: input.props.source\n                                    ? undefined\n                                    : index2,\n                                label: typeof input.props\n                                    .label ===\n                                    'undefined'\n                                    ? input.props.source\n                                        ? \"resources.\" + resource + \".fields.\" + input\n                                            .props\n                                            .source\n                                        : undefined\n                                    : input.props.label,\n                            }), record: (records &&\n                                records[index]) ||\n                                {}, resource: resource, variant: variant, margin: margin })) : null;\n                    })),\n                    !_this.disableRemoveField((records && records[index]) || {}, disableRemove) && (React.createElement(\"span\", { className: classes.action },\n                        React.createElement(Button, { className: classNames('button-remove', \"button-remove-\" + source + \"-\" + index), size: \"small\", onClick: _this.removeField(index) },\n                            React.createElement(CloseIcon, { className: classes.leftIcon }),\n                            translate('ra.action.remove'))))))); })),\n            !disableAdd && (React.createElement(\"li\", { className: classes.line },\n                React.createElement(\"span\", { className: classes.action },\n                    React.createElement(Button, { className: classNames('button-add', \"button-add-\" + source), size: \"small\", onClick: this.addField },\n                        React.createElement(AddIcon, { className: classes.leftIcon }),\n                        translate('ra.action.add'))))))) : null;\n    };\n    return SimpleFormIterator;\n}(Component));\nexport { SimpleFormIterator };\nSimpleFormIterator.defaultProps = {\n    disableAdd: false,\n    disableRemove: false,\n};\nSimpleFormIterator.propTypes = {\n    defaultValue: PropTypes.any,\n    basePath: PropTypes.string,\n    children: PropTypes.node,\n    classes: PropTypes.object,\n    className: PropTypes.string,\n    fields: PropTypes.object,\n    meta: PropTypes.object,\n    record: PropTypes.object,\n    source: PropTypes.string,\n    resource: PropTypes.string,\n    translate: PropTypes.func,\n    disableAdd: PropTypes.bool,\n    disableRemove: PropTypes.oneOfType([PropTypes.func, PropTypes.bool]),\n    TransitionProps: PropTypes.shape({}),\n};\nexport default compose(translate, withStyles(styles))(SimpleFormIterator);\n"]},"metadata":{},"sourceType":"module"}